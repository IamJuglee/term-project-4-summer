<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>12회차 과제 - Proxy 객체를 이용해 비밀번호 검증 기능을 구현한 객체 설계</title>
</head>
<body>
<script>
    // 비밀번호 유효성 검사
    function isValidPassword(password) {
        return typeof password === 'string' &&
            password.length >= 8 &&
            /[A-Z]/.test(password) &&
            /[a-z]/.test(password) &&
            /[0-9]/.test(password) &&
            /[\W_]/.test(password);
    }

    // 사용자 객체
    const user = {
        username: "user1234",
        _password: ""
    };

    // Proxy 객체
    const secureUser = new Proxy(user, {
        get(target, prop) {
            if (prop === 'password') return undefined;
            return target[prop];
        },
        set(target, prop, value) {
            if (prop === 'password') {
                if (!isValidPassword(value)) {
                    alert("비밀번호 형식이 올바르지 않습니다.");
                    return false;
                }
                target._password = value;
                alert("비밀번호가 성공적으로 설정되었습니다.");
                return true;
            }
            target[prop] = value;
            return true;
        }
    });

    // 비밀번호 입력 (설명 포함)
    const pw = prompt(
        "비밀번호를 입력하세요.\n\n" +
        "조건:\n" +
        "- 8자 이상\n" +
        "- 영어 대문자 포함\n" +
        "- 영어 소문자 포함\n" +
        "- 숫자 포함\n" +
        "- 특수문자 포함"
    );

    if (pw !== null) {
        secureUser.password = pw;
    }
</script>
</body>
</html>
